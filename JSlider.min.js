class JSlider{constructor(t,e){this.version=2,this._defaultSettings={showElements:1,rowsCount:1,infinite:!1,centered:!1,startSlide:1,currentSlideClass:"jslider-current",previousButton:"#jslider-prev",nextButton:"#jslider-next",scrollDots:!1,autoPlay:!1,autoPlaySpeed:1e3,variableWidth:!1,spotlightCurrent:!0,touch:!0,isPlaying:!1},this.touchStart=0,this.touchEnd=0,this._settings=this._defaultSettings,this.mainElement=document.querySelector(t),this.parentElementName=t,this.updateSettings(e),this.prepareHTMLStructure(),this.currentSlide=this._settings.startSlide-1,this.scrollTo(),this._settings.autoPlay&&this.initAutoPlay()}updateSettings(t){t&&Object.keys(t).map((e,s)=>{this._settings[e]=t[e]})}prepareHTMLStructure(){this.mainElement.className+=" jslider";for(let t=0;t<this.mainElement.children.length;t++)this.mainElement.children[t].className+=" jslider-slide";let t=this.mainElement.innerHTML;this.mainElement.innerHTML=`\n      <div class="jslider-track">${t}</div>\n    `,this.trackElement=this.mainElement.children[0],this.slidesCount=this.trackElement.children.length,this.slidesCount=Math.ceil(this.trackElement.children.length/this._settings.rowsCount),this.styleElements(),this._settings.scrollDots&&this.addScrollDots(),this.initSliderResizeEvent(),this.initArrowButtons(),1==this._settings.touch&&this.initTouchEvents(),1==this._settings.scrollDots&&this.initScrollDots()}fixSlideIndex(){let t=this.currentSlide;t>=0?this._settings.infinite?this._settings.centered?t>this.slidesCount-1&&(t=0):t>this.slidesCount-this._settings.showElements&&(t=0):this._settings.centered?t>this.slidesCount-1&&(t=this.slidesCount-1):t>this.slidesCount-this._settings.showElements&&(t=this.slidesCount-this._settings.showElements):t=this._settings.infinite?this._settings.centered?this.slidesCount-1:this.slidesCount-this._settings.showElements:0,this.currentSlide=t}addScrollDots(){let t='<div class="jslider-dots">';const e=0==this._settings.centered?Math.floor(this.slidesCount/this._settings.showElements)*this._settings.showElements:this.slidesCount;for(let s=0;s<e;s++)t+=`<button class="jslider-dot" data-slide="${s}"></button>`;t+="</div>",this.mainElement.innerHTML+=t,this.trackElement=this.mainElement.children[0]}styleElements(){this.sliderWidth=this.mainElement.offsetWidth,this.slideWidth=this.sliderWidth/this._settings.showElements;for(let t=0;t<this.trackElement.children.length;t++)this.trackElement.children[t].style.width=this.slideWidth;this.trackElement.style.width=Math.ceil(this.trackElement.children.length/this._settings.rowsCount)*this.slideWidth+100,this.mainElement.style.height=this.trackElement.offsetHeight}spotlightCurrentElements(){const t=this;if(1==this._settings.scrollDots){let e=document.querySelectorAll(`${this.parentElementName} .jslider-dot`);[].forEach.call(e,function(e,s){s!=t.currentSlide?e.classList.remove("active"):e.classList.add("active")})}if(1==this._settings.spotlightCurrent){let e=document.querySelectorAll(`${this.parentElementName} .jslider-slide`);[].forEach.call(e,function(e,s){s!=t.currentSlide?e.classList.remove(t._settings.currentSlideClass):e.classList.add(t._settings.currentSlideClass),s!=t.currentSlide?e.classList.remove("active"):e.classList.add("active")})}}scrollTo(){this.fixSlideIndex();let t=0-this.slideWidth*this.currentSlide;1==this._settings.centered&&(t=this.sliderWidth/2-this.slideWidth*this.currentSlide-this.slideWidth/2),this.trackElement.style.left=t,this.spotlightCurrentElements()}initSliderResizeEvent(){const t=this;window.addEventListener("resize",e=>{t.styleElements(),t.scrollTo()})}initAutoPlay(){this._settings.isPlaying=!0,setInterval(t=>{1==this._settings.isPlaying&&(this.currentSlide++,this.scrollTo())},this._settings.autoPlaySpeed)}initArrowButtons(){const t=this;document.querySelector(t._settings.previousButton).addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.currentSlide--,t.scrollTo()}),document.querySelector(t._settings.nextButton).addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.currentSlide++,t.scrollTo()})}initScrollDots(){const t=this;let e=document.querySelectorAll(`${this.parentElementName} .jslider-dot`);[].forEach.call(e,function(e,s){e.addEventListener("click",e=>{t.currentSlide=parseInt(e.target.dataset.slide),t.scrollTo()})})}initTouchEvents(){for(let t=0;t<this.slidesCount;t++)document.querySelectorAll(".jslider-slide")[t].addEventListener("touchstart",t=>{this.touchStart=t.touches[0].clientX,this.touch=!0},!!supportsPassive&&{passive:!0}),document.querySelectorAll(".jslider-slide")[t].addEventListener("touchend",t=>{this.touchEnd=0,this.touch=!1},!!supportsPassive&&{passive:!0}),document.querySelectorAll(".jslider-slide")[t].addEventListener("touchmove",t=>{try{1==this.touch&&(this.touchEnd=this.touchStart-t.touches[0].clientX,Math.abs(this.touchEnd)>=this.slideWidth/2&&(this.touchEnd<0?this.currentSlide--:this.currentSlide++,this.touch=!1))}catch(t){}this.scrollTo()},!!supportsPassive&&{passive:!0})}}let supportsPassive=!1;try{let t=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){}
